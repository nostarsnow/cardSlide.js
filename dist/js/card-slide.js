"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),CardSlide=function(){function t(e,i){_classCallCheck(this,t);var n={autoplay:0,speed:350,effect:"ease-out",drag:!0,dragRelation:"ltr",dragDistance:50,dragNextable:!0,dragPrevable:!0,childrenTouchStop:!1,childrenTouchPrevent:!0,nextBtn:".card-slide-next",prevBtn:".card-slide-prev",direction:"horizontal",activeClass:"card-slide-active",width:void 0,height:void 0,gutter:10,swiperStart:function(t,e){}};return this.opts=Object.assign(n,i),this.$dom=e,this.init(),this}return _createClass(t,[{key:"init",value:function(){var t=this.opts,e=this.$dom,i=this.getPrefix();if(this.settings={prefix:i,killIe:/msie [6|7|8|9]/i.test(navigator.userAgent),transform:i.css+"transform",transition:i.css+"transition",isMob:this.isMob(),autoplay:0},this.$wrap=e.querySelector(".card-slide-wrapper"),this.$slides=[].slice.apply(e.querySelectorAll(".card-slide")),this.activeIndex=0,this.slidesLength=this.$slides.length,!t.width||!t.height){var n=this.$slides[0].getBoundingClientRect(),s=n.width,r=n.height;t.width=s,t.height=r}"horizontal"===this.opts.direction?this.setStyle(this.$wrap,{width:(t.width+t.gutter-t.gutter*t.gutter/t.width*(this.slidesLength-1)).toFixed(4)+"px",height:t.height+"px"}):this.setStyle(this.$wrap,{width:t.width+"px",height:t.height+"px"}),this.setSlideStyles(),this.addEventListener(),this.setAutoplay()}},{key:"next",value:function e(){this.setAutoplay();var e=this.activeIndex+1;e===this.slidesLength&&(e=0),this.opts.swiperStart.call(this,this.activeIndex,this.activeIndex=e),this.setSlideStyles()}},{key:"prev",value:function(){this.setAutoplay();var t=this.activeIndex-1;t===-1&&(t=this.slidesLength-1),this.opts.swiperStart.call(this,this.activeIndex,this.activeIndex=t),this.setSlideStyles()}},{key:"setSlideStyles",value:function(){var t=this,e=this.formatSlideStyles();e.forEach(function(e,i){var n=t.$slides[i];i===t.activeIndex?n.classList.add(t.opts.activeClass):n.classList.remove(t.opts.activeClass),n.setAttribute("data-slide-index",t.slidesLength-e["z-index"]+1),t.setStyle(n,e)})}},{key:"formatSlideStyles",value:function(){var t=this.activeIndex,e=this.slidesLength,i=this.opts,n=this.settings,s=this.$slides;return s.map(function(s,r){var a,o=1,l=0,d=0,h=1,u=0,c=i.gutter/i.width;return r===t?o=e:(r-t>0?(u=r-t,o=e-u):(u=e-t+r,o=t-r),h=(1-c*u).toFixed(4),"horizontal"===i.direction?l=(c*u*100).toFixed(2)+"%":d=-(c*u*100).toFixed(2)+"%"),a={"z-index":o},_defineProperty(a,n.transform,"translateX("+l+") translateY("+d+") scale("+h+")"),_defineProperty(a,n.transition,n.transform+" "+i.speed+"ms "+i.effect),a})}},{key:"setAutoplay",value:function(){var t=this;this.opts.autoplay&&(this.settings.autoplay&&clearInterval(this.settings.autoplay),this.settings.autoplay=setInterval(function(){t.next()},this.opts.autoplay+this.opts.speed))}},{key:"addEventListener",value:function(){var t=this,e=this.opts,i=this.settings,n=this.$dom;e.nextBtn&&(this.$nextBtn=n.querySelector(e.nextBtn),this.$nextBtn&&this.$nextBtn.addEventListener("click",this.next.bind(this),!1)),e.prevBtn&&(this.$prevBtn=n.querySelector(e.prevBtn),this.$prevBtn&&this.$prevBtn.addEventListener("click",this.prev.bind(this),!1)),e.drag&&(i.draging=!0,this.$slides.forEach(function(n){t.swipe(n,function(n,s){if(i.draging){var r="horizontal"===t.opts.direction?s.x:s.y;r>e.dragDistance&&e.dragNextable&&(i.draging=!1,t["ltr"===e.dragRelation?"prev":"next"]()),r<-e.dragDistance&&e.dragPrevable&&(i.draging=!1,t["ltr"===e.dragRelation?"next":"prev"]())}})}))}},{key:"h",value:function(t,e,i){return this._createElement(t,e,i)}},{key:"_createElement",value:function(t,e,i){var n=this,s=document.createElement(t);return Object.keys(e).forEach(function(t){"style"===t?n.setStyle(s,e[t]):s.setAttribute(t,e[t])}),this.isType(i,"String")&&(s.innerHTML=i),s}},{key:"getStyleStr",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(i){return t.str2label(i)+":"+e[i]+";"}).join("")}},{key:"setStyle",value:function(t,e){var i=this;Object.keys(e).forEach(function(n){t.style[i.label2str(n)]=e[n]})}},{key:"isType",value:function(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"str2label",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i="";if(t[0].match(/[A-Z]+/))i=t.toLowerCase();else{var n=t.split(/[A-Z]+/);n.forEach(function(s,r){if(r>0){for(var a=0,o=r;o>0;o--)a+=n[o-1].length;i+=e+(n[r]=t.substr(a,1)+s).toLowerCase()}else i+=n[r].toLowerCase()})}return i}},{key:"label2str",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.split(e).filter(function(t){return t}).map(function(t,e){return 0!==e&&(t=t.substring(0,1).toUpperCase()+t.substring(1)),t}).join("")}},{key:"getPrefix",value:function(){return function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1],i="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return{dom:i,lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}()}},{key:"isMob",value:function(){var t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],e=!1;for(var i in t)new RegExp(t[i],"i").test(window.navigator.userAgent)&&(e=!0);return e}},{key:"swipe",value:function(t,e){function i(t){var e,i,n=t.pageX||t.touches[0].pageX,s=t.pageY||t.touches[0].pageY;return e=n>a.x?"right":"left",i=s>a.y?"bottom":"top",{direction:{x:e,y:i},offset:{x:n-a.x,y:s-a.y}}}var n=this,s=this.settings.isMob,r=!1,a=null,o=s?"touchstart":"mousedown",l=s?"touchmove":"mousemove",d=s?"touchend":"mouseup";return t.addEventListener(o,function(t){r=!0,a={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY},n.opts.childrenTouchStop&&t.stopPropagation(),!s&&n.opts.childrenTouchPrevent&&t.preventDefault()},!1),t.addEventListener(d,function(){r=!1,a=null,n.settings.draging=!0},!1),t.addEventListener(l,function(t){if(r){var n=i(t);e(n.direction,n.offset)}},!1),!0}}]),t}();window.CardSlide=CardSlide,"undefined"!=typeof module?module.exports=window.CardSlide:"function"==typeof define&&define.amd&&define([],function(){return window.CardSlide});